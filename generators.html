<script>
  document.addEventListener("DOMContentLoaded", () => {
    const button = document.getElementById("generate-npc");
    const result = document.getElementById("npc-result");
    const image = document.getElementById("npc-image");

    // –¢–µ–≥–∏ –¥–ª—è Unsplash
    const roleImages = {
      "—Ç–æ—Ä–≥–æ–≤–µ—Ü –∑–µ–ª—å—è–º–∏": "alchemist, potion, fantasy",
      "–±—Ä–æ–¥—è—á–∏–π –±–∞—Ä–¥": "minstrel, lute, bard",
      "—Å—Ç–∞—Ä—ã–π –º–∞–≥": "wizard, old, magic",
      "—à–ø–∏–æ–Ω": "spy, cloak, stealth",
      "—Å–≤—è—â–µ–Ω–Ω–∏–∫": "priest, holy, temple",
      "–Ω–∞—ë–º–Ω–∏–∫": "mercenary, armor, sword",
      "–∞—Ä—Ö–µ–æ–ª–æ–≥": "archaeologist, ruins, explorer",
      "—à—É—Ç": "jester, clown, medieval",
      "–ª–µ—Å–Ω–æ–π —Å—Ç—Ä–∞–∂": "ranger, forest, bow",
      "—Ü–µ–ª–∏—Ç–µ–ª—å": "healer, herbs, mystical"
    };

    button.addEventListener("click", () => {
      const role = Object.keys(roleImages)[Math.floor(Math.random() * Object.keys(roleImages).length)];
      const keywords = roleImages[role];

      // –ò—Å–ø–æ–ª—å–∑—É–µ–º CORS-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏
      const imageUrl = `https://corsproxy.io/?https://source.unsplash.com/random/800x600/?${keywords},dnd,fantasy`;

      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É
      image.src = imageUrl;
      image.alt = role;

      // –ù–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
      image.onerror = () => {
        image.src = "https://via.placeholder.com/800x600/3a2a1a/8b6f47?text=–ù–ü–°+–Ω–µ+–∑–∞–≥—Ä—É–∑–∏–ª—Å—è";
        image.alt = "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞";
      };

      // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
      result.innerHTML = `
        <strong>üé≠ –†–æ–ª—å:</strong> ${role}<br>
        <em>–ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</em>
      `;
    });
  });
</script>
