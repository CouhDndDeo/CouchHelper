<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üßæ –õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</title>
  <link rel="stylesheet" href="../../style.css" />
  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
  <style>
    /* === –û—Å–Ω–æ–≤–Ω–æ–π –º–∞–∫–µ—Ç: 2 –∫–æ–ª–æ–Ω–∫–∏ —Å–≤–µ—Ä—Ö—É, 1 –∫–æ–ª–æ–Ω–∫–∞ —Å–Ω–∏–∑—É === */
    .main-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin: 20px 0;
    }

    @media (max-width: 900px) {
      .main-layout {
        grid-template-columns: 1fr;
      }
    }

    .form-section {
      background-color: #4a2f1a;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #8b6f47;
      margin-bottom: 20px;
    }

    .form-section h3 {
      color: #d4af37;
      margin-top: 0;
      border-bottom: 1px solid #8b6f47;
      padding-bottom: 5px;
      margin-bottom: 15px;
    }

    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
    }

    .form-row > label {
      flex: 1;
      min-width: 150px;
    }

    .form-row input,
    .form-row select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 4px;
      border: 1px solid #8b6f47;
      background: #5a3b26;
      color: #e0ccb6;
      font-size: 1em;
      box-sizing: border-box;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 15px 0;
    }

    .stat-box {
      text-align: center;
      background: #5a3b26;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #8b6f47;
    }

    .stat-box label {
      font-size: 0.9em;
      display: block;
      margin-bottom: 5px;
    }

    .stat-box input {
      width: 100%;
      text-align: center;
      font-weight: bold;
      font-size: 1.1em;
      padding: 5px;
      max-width: 70px;
      margin: 0 auto;
    }

    .stat-mod {
      font-size: 0.9em;
      color: #b8a594;
    }

    .skills-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      list-style: none;
      padding: 0;
      margin-top: 10px;
    }

    .skills-grid li {
      font-size: 0.95em;
    }

    .skills-grid label {
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .skills-grid input[type="checkbox"] {
      margin-right: 8px;
      transform: scale(1.2);
    }

    /* === –°–≤–æ–¥–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–∏—Ç–æ–≥–æ–≤—ã–π –±–ª–æ–∫) === */
    .char-summary {
      background: linear-gradient(145deg, #5a3b26, #4a2e1a);
      border: 2px solid #8b6f47;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 
        0 6px 0 #3a2410,
        0 6px 15px rgba(0, 0, 0, 0.5);
      text-align: center;
      margin-top: 30px;
      position: relative;
    }

    .avatar-container {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 2px solid #d4af37;
      overflow: hidden;
      margin: 0 auto 15px;
      background-color: #3a2410;
    }

    .avatar-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .summary-name {
      font-size: 1.8em;
      color: #f0d98f;
      margin: 10px 0;
    }

    .summary-details {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      font-size: 0.95em;
      margin-bottom: 20px;
    }

    .summary-details > div {
      border-right: 1px solid #8b6f47;
      padding: 0 10px;
    }

    .summary-details > div:last-child {
      border-right: none;
    }

    .summary-stats {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      margin: 20px 0;
    }

    .summary-stat {
      background: rgba(0, 0, 0, 0.2);
      padding: 10px 5px;
      border-radius: 6px;
      border: 1px solid #5a3b26;
    }

    .summary-stat-name {
      font-size: 0.8em;
      color: #b8a594;
    }

    .summary-stat-value {
      font-size: 1.4em;
      font-weight: bold;
      color: #f0d98f;
    }

    .summary-stat-mod {
      font-size: 0.9em;
      color: #d4af37;
    }

    .summary-combat {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
      padding: 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 6px;
      font-size: 0.95em;
    }

    .summary-quick-info {
      text-align: left;
      margin-top: 20px;
      font-size: 0.9em;
    }

    .summary-quick-info h4 {
      color: #d4af37;
      border-bottom: 1px solid #8b6f47;
      padding-bottom: 3px;
      margin: 10px 0 5px;
    }

    .summary-quick-info ul {
      list-style-type: none;
      padding-left: 10px;
      margin: 0;
      columns: 2;
      column-gap: 20px;
    }

    .summary-quick-info li {
      margin-bottom: 3px;
    }

    /* === –°–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π === */
    .char-list {
      background-color: #4a2f1a;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #8b6f47;
      margin-top: 30px;
    }

    .char-list h3 {
      color: #d4af37;
      margin-top: 0;
      border-bottom: 1px solid #8b6f47;
      padding-bottom: 5px;
      margin-bottom: 15px;
    }

    .char-list ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .char-list li {
      display: flex;
      justify-content: space-between;
      padding: 8px 10px;
      border-bottom: 1px dotted #5a3b26;
      font-size: 0.95em;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 6px;
      margin-bottom: 6px;
    }

    .char-list li:last-child {
      border-bottom: none;
    }

    .char-list .char-actions {
      display: flex;
      gap: 8px;
    }

    .char-list button {
      padding: 4px 8px;
      font-size: 0.85em;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }

    .char-list .btn-load {
      background: #5a3b26;
      color: #d4af37;
    }

    .char-list .btn-delete {
      background: #8b4513;
      color: #fff;
    }

    .char-list .btn-load:hover {
      background: #6b4426;
    }

    .char-list .btn-delete:hover {
      background: #a0522d;
    }

    .form-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    /* === –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏ === */
    @media print {
      body {
        font-size: 0.85em;
        margin: 0;
        padding: 0;
        background: #fff;
        color: #000;
      }

      .container {
        max-width: 100%;
        margin: 0;
        padding: 10px;
        border: none;
        box-shadow: none;
      }

      header, nav, footer, .no-print {
        display: none;
      }

      .main-layout {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .form-section, .char-summary {
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #000;
        box-shadow: none;
      }

      .stats-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
      }

      .stat-box {
        padding: 5px;
      }

      .skills-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 5px;
      }

      .skills-grid li {
        font-size: 0.9em;
      }

      .summary-stats {
        grid-template-columns: repeat(6, 1fr);
        gap: 5px;
      }

      .summary-stat {
        padding: 5px;
      }

      .summary-combat {
        flex-wrap: wrap;
      }

      .summary-combat > div {
        flex: 1 1 45%;
        margin-bottom: 5px;
      }

      .summary-quick-info ul {
        columns: 1;
      }

      @page {
        size: A4;
        margin: 0.5cm;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üßæ –õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h1>
      <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ–≥–æ –≥–µ—Ä–æ—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º D&D 5e</p>
    </header>

    <nav>
      <a href="../rules-dnd.html" class="btn-back">
        <span class="arrow">‚Üê</span>
        <span class="text">–í –º–µ–Ω—é D&D</span>
      </a>
    </nav>

    <main class="main-layout">
      <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
      <div class="left-column">
        <div class="form-section">
          <h3>üìù –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
          <div class="form-row">
            <label>
              –ò–º—è:
              <input type="text" id="char-name" placeholder="–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞" />
            </label>
            <label>
              –ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è:
              <input type="text" id="char-background" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ—Å—Ç–æ–ª—é–¥–∏–Ω" />
            </label>
          </div>
          <div class="form-row">
            <label>
              –ú–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏–µ:
              <select id="char-alignment">
                <option value="–ó–∞–∫–æ–Ω–Ω–æ-–¥–æ–±—Ä—ã–π">–ó–∞–∫–æ–Ω–Ω–æ-–¥–æ–±—Ä—ã–π</option>
                <option value="–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–¥–æ–±—Ä—ã–π">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–¥–æ–±—Ä—ã–π</option>
                <option value="–•–∞–æ—Ç–∏—á–Ω–æ-–¥–æ–±—Ä—ã–π">–•–∞–æ—Ç–∏—á–Ω–æ-–¥–æ–±—Ä—ã–π</option>
                <option value="–ó–∞–∫–æ–Ω–Ω–æ-–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π">–ó–∞–∫–æ–Ω–Ω–æ-–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π</option>
                <option value="–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π</option>
                <option value="–•–∞–æ—Ç–∏—á–Ω–æ-–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π">–•–∞–æ—Ç–∏—á–Ω–æ-–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π</option>
                <option value="–ó–∞–∫–æ–Ω–Ω–æ-–∑–ª–æ–π">–ó–∞–∫–æ–Ω–Ω–æ-–∑–ª–æ–π</option>
                <option value="–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–∑–ª–æ–π">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–∑–ª–æ–π</option>
                <option value="–•–∞–æ—Ç–∏—á–Ω–æ-–∑–ª–æ–π">–•–∞–æ—Ç–∏—á–Ω–æ-–∑–ª–æ–π</option>
              </select>
            </label>
            <label>
              –û–ø—ã—Ç:
              <input type="number" id="char-exp" value="0" />
            </label>
          </div>
          <div class="form-row">
            <label>
              –ê–≤–∞—Ç–∞—Ä:
              <input type="file" id="avatar-upload" accept="image/*">
            </label>
          </div>
        </div>

        <div class="form-section">
          <h3>üß¨ –†–∞—Å–∞ –∏ –ö–ª–∞—Å—Å</h3>
          <div class="form-row">
            <label>
              –†–∞—Å–∞:
              <select id="char-race">
                <option value="human">–ß–µ–ª–æ–≤–µ–∫</option>
                <option value="elf">–≠–ª—å—Ñ</option>
                <option value="dwarf">–î–≤–∞—Ä—Ñ</option>
                <option value="halfling">–ü–æ–ª—É—Ä–æ—Å–ª–∏–∫</option>
                <option value="gnome">–ì–Ω–æ–º</option>
                <option value="half-elf">–ü–æ–ª—É—ç–ª—å—Ñ</option>
                <option value="half-orc">–ü–æ–ª—É–æ—Ä–∫</option>
                <option value="tiefling">–¢–∏—Ñ–ª–∏–Ω–≥</option>
                <option value="aarakocra">–ê–∞—Ä–∞–∫–æ–∫—Ä–∞</option>
                <option value="aasimar">–ê–∞—Å–∏–º–∞—Ä</option>
                <option value="bugbear">–ë–∞–≥–±–∏—Ä</option>
                <option value="gith">–ì–∏—Ç</option>
                <option value="giff">–ì–∏—Ñ—Ñ</option>
                <option value="simic-hybrid">–ì–∏–±—Ä–∏–¥ –°–∏–º–∏–∫–æ–≤</option>
                <option value="verdan">–í–µ—Ä–¥–∞–Ω</option>
                <option value="vedalken">–í–µ–¥–∞–ª–∫–µ–Ω</option>
                <option value="autognome">–ê–≤—Ç–æ–≥–Ω–æ–º</option>
                <!-- –î–æ–±–∞–≤—å –±–æ–ª—å—à–µ —Ä–∞—Å –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ -->
              </select>
            </label>
            <label>
              –ö–ª–∞—Å—Å:
              <select id="char-class">
                <option value="–≤–æ–∏–Ω">–í–æ–∏–Ω</option>
                <option value="–º–∞–≥">–ú–∞–≥</option>
                <option value="–∂—Ä–µ—Ü">–ñ—Ä–µ—Ü</option>
                <option value="—Ä–∞–∑–±–æ–π–Ω–∏–∫">–†–∞–∑–±–æ–π–Ω–∏–∫</option>
                <option value="–ø–∞–ª–∞–¥–∏–Ω">–ü–∞–ª–∞–¥–∏–Ω</option>
                <option value="—Å–ª–µ–¥–æ–ø—ã—Ç">–°–ª–µ–¥–æ–ø—ã—Ç</option>
                <option value="–≤–∞—Ä–≤–∞—Ä">–í–∞—Ä–≤–∞—Ä</option>
                <option value="–¥—Ä—É–∏–¥">–î—Ä—É–∏–¥</option>
                <option value="–±–∞—Ä–¥">–ë–∞—Ä–¥</option>
                <option value="—á–∞—Ä–æ–¥–µ–π">–ß–∞—Ä–æ–¥–µ–π</option>
                <option value="–∫–æ–ª–¥—É–Ω">–ö–æ–ª–¥—É–Ω</option>
                <option value="–º–æ–Ω–∞—Ö">–ú–æ–Ω–∞—Ö</option>
              </select>
            </label>
            <label>
              –£—Ä–æ–≤–µ–Ω—å:
              <input type="number" id="char-level" min="1" max="20" value="1" />
            </label>
          </div>
        </div>

        <div class="form-section">
          <h3>üìä –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
          <div class="stats-grid">
            <div class="stat-box">
              <label for="str">–°–ò–õ</label>
              <input type="number" id="str" min="3" max="20" value="10" />
              <div class="stat-mod">(<span id="str-mod">+0</span>)</div>
            </div>
            <div class="stat-box">
              <label for="dex">–õ–û–í</label>
              <input type="number" id="dex" min="3" max="20" value="10" />
              <div class="stat-mod">(<span id="dex-mod">+0</span>)</div>
            </div>
            <div class="stat-box">
              <label for="con">–¢–ï–õ</label>
              <input type="number" id="con" min="3" max="20" value="10" />
              <div class="stat-mod">(<span id="con-mod">+0</span>)</div>
            </div>
            <div class="stat-box">
              <label for="int">–ò–ù–¢</label>
              <input type="number" id="int" min="3" max="20" value="10" />
              <div class="stat-mod">(<span id="int-mod">+0</span>)</div>
            </div>
            <div class="stat-box">
              <label for="wis">–ú–î–†</label>
              <input type="number" id="wis" min="3" max="20" value="10" />
              <div class="stat-mod">(<span id="wis-mod">+0</span>)</div>
            </div>
            <div class="stat-box">
              <label for="cha">–•–ê–†</label>
              <input type="number" id="cha" min="3" max="20" value="10" />
              <div class="stat-mod">(<span id="cha-mod">+0</span>)</div>
            </div>
          </div>
        </div>
      </div>

      <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ë–æ–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –Ω–∞–≤—ã–∫–∏ -->
      <div class="right-column">
        <div class="form-section">
          <h3>üõ°Ô∏è –ë–æ–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h3>
          <div class="form-row">
            <label>
              –ö–æ—Å—Ç—å –•–∏—Ç–æ–≤ (HD):
              <input type="text" id="hit-die" placeholder="1–∫10" readonly />
            </label>
            <label>
              –¢–µ–∫—É—â–∏–µ –•–ü:
              <input type="number" id="current-hp" placeholder="–¢–µ–∫—É—â–∏–µ" />
            </label>
            <label>
              –ú–∞–∫—Å. –•–ü:
              <input type="number" id="max-hp" placeholder="–ú–∞–∫—Å–∏–º—É–º" />
            </label>
          </div>
          <div class="form-row">
            <label>
              –ö–î (–±–µ–∑ –¥–æ—Å–ø–∞—Ö–∞):
              <span id="calculated-ac">10</span>
            </label>
            <label>
              –ë–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (—Ñ—É—Ç—ã):
              <input type="number" id="base-speed" value="30" />
            </label>
            <label>
              –°–∫–æ—Ä–æ—Å—Ç—å (—Ñ—É—Ç—ã):
              <span id="calculated-speed">30</span>
            </label>
          </div>
          <div class="form-row">
            <label>
              –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞:
              <span id="calculated-init">+0</span>
            </label>
          </div>
        </div>

        <div class="form-section">
          <h3>üéØ –ù–∞–≤—ã–∫–∏</h3>
          <ul class="skills-grid">
            <li><label><input type="checkbox" id="skill-acrobatics"> –ê–∫—Ä–æ–±–∞—Ç–∏–∫–∞ (DEX)</label></li>
            <li><label><input type="checkbox" id="skill-animal-handling"> –£—Ö–æ–¥ –∑–∞ –∂–∏–≤–æ—Ç–Ω—ã–º–∏ (WIS)</label></li>
            <li><label><input type="checkbox" id="skill-arcana"> –ú–∞–≥–∏—è (INT)</label></li>
            <li><label><input type="checkbox" id="skill-athletics"> –ê—Ç–ª–µ—Ç–∏–∫–∞ (STR)</label></li>
            <li><label><input type="checkbox" id="skill-deception"> –û–±–º–∞–Ω (CHA)</label></li>
            <li><label><input type="checkbox" id="skill-history"> –ò—Å—Ç–æ—Ä–∏—è (INT)</label></li>
            <li><label><input type="checkbox" id="skill-insight"> –ü—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (WIS)</label></li>
            <li><label><input type="checkbox" id="skill-intimidation"> –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ (CHA)</label></li>
            <li><label><input type="checkbox" id="skill-investigation"> –†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (INT)</label></li>
            <li><label><input type="checkbox" id="skill-medicine"> –ú–µ–¥–∏—Ü–∏–Ω–∞ (WIS)</label></li>
            <li><label><input type="checkbox" id="skill-nature"> –ü—Ä–∏—Ä–æ–¥–∞ (INT)</label></li>
            <li><label><input type="checkbox" id="skill-perception"> –í–æ—Å–ø—Ä–∏—è—Ç–∏–µ (WIS)</label></li>
            <li><label><input type="checkbox" id="skill-performance"> –í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ (CHA)</label></li>
            <li><label><input type="checkbox" id="skill-persuasion"> –£–±–µ–∂–¥–µ–Ω–∏–µ (CHA)</label></li>
            <li><label><input type="checkbox" id="skill-religion"> –†–µ–ª–∏–≥–∏—è (INT)</label></li>
            <li><label><input type="checkbox" id="skill-sleight-of-hand"> –õ–æ–≤–∫–æ—Å—Ç—å —Ä—É–∫ (DEX)</label></li>
            <li><label><input type="checkbox" id="skill-stealth"> –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å (DEX)</label></li>
            <li><label><input type="checkbox" id="skill-survival"> –í—ã–∂–∏–≤–∞–Ω–∏–µ (WIS)</label></li>
          </ul>
        </div>

        <div class="form-buttons">
          <button id="save-char" class="btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button id="export-char" class="btn-secondary">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
          <button id="reset-char" class="btn-clear">üóëÔ∏è –°–±—Ä–æ—Å</button>
          <button id="print-char" class="btn-print-summary">üñ®Ô∏è –ü–µ—á–∞—Ç—å</button>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π -->
        <div class="char-list">
          <h3>üë• –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏</h3>
          <ul id="saved-characters-list">
            <li>–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</li>
          </ul>
        </div>
      </div>

      <!-- –ù–∏–∂–Ω–∏–π –±–ª–æ–∫: –°–≤–æ–¥–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
      <div class="summary-section" style="grid-column: 1 / -1;">
        <h2>üé≠ –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂</h2>
        <div class="char-summary">
          <div class="avatar-container">
            <img id="summary-avatar" src="https://via.placeholder.com/100x100/3a2a1a/d4af37?text=üë§" alt="–ê–≤–∞—Ç–∞—Ä">
          </div>
          <div class="summary-name" id="summary-name">–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</div>
          <div class="summary-details">
            <div><strong>–†–∞—Å–∞:</strong> <span id="summary-race">—á–µ–ª–æ–≤–µ–∫</span></div>
            <div><strong>–ö–ª–∞—Å—Å:</strong> <span id="summary-class">–≤–æ–∏–Ω</span></div>
            <div><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> <span id="summary-level">1</span></div>
            <div><strong>–ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è:</strong> <span id="summary-bg">-</span></div>
            <div><strong>–ú–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏–µ:</strong> <span id="summary-align">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π</span></div>
          </div>

          <div class="summary-stats">
            <div class="summary-stat">
              <div class="summary-stat-name">–°–ò–õ</div>
              <div class="summary-stat-value" id="summary-str-val">10</div>
              <div class="summary-stat-mod" id="summary-str-mod">+0</div>
            </div>
            <div class="summary-stat">
              <div class="summary-stat-name">–õ–û–í</div>
              <div class="summary-stat-value" id="summary-dex-val">10</div>
              <div class="summary-stat-mod" id="summary-dex-mod">+0</div>
            </div>
            <div class="summary-stat">
              <div class="summary-stat-name">–¢–ï–õ</div>
              <div class="summary-stat-value" id="summary-con-val">10</div>
              <div class="summary-stat-mod" id="summary-con-mod">+0</div>
            </div>
            <div class="summary-stat">
              <div class="summary-stat-name">–ò–ù–¢</div>
              <div class="summary-stat-value" id="summary-int-val">10</div>
              <div class="summary-stat-mod" id="summary-int-mod">+0</div>
            </div>
            <div class="summary-stat">
              <div class="summary-stat-name">–ú–î–†</div>
              <div class="summary-stat-value" id="summary-wis-val">10</div>
              <div class="summary-stat-mod" id="summary-wis-mod">+0</div>
            </div>
            <div class="summary-stat">
              <div class="summary-stat-name">–•–ê–†</div>
              <div class="summary-stat-value" id="summary-cha-val">10</div>
              <div class="summary-stat-mod" id="summary-cha-mod">+0</div>
            </div>
          </div>

          <div class="summary-combat">
            <div><strong>–ö–î:</strong> <span id="summary-ac">10</span></div>
            <div><strong>–•–ü:</strong> <span id="summary-hp">0</span> / <span id="summary-max-hp">0</span></div>
            <div><strong>–°–∫–æ—Ä–æ—Å—Ç—å:</strong> <span id="summary-speed">30</span> —Ñ—É—Ç–æ–≤</div>
            <div><strong>–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞:</strong> <span id="summary-init">+0</span></div>
          </div>

          <div class="summary-quick-info">
            <div style="display: flex; gap: 30px;">
              <div>
                <h4>–ö–ª—é—á–µ–≤—ã–µ —Å–ø–∞—Å–±—Ä–æ—Å–∫–∏</h4>
                <ul id="summary-saves">
                  <li>–°–∏–ª: +0</li>
                  <li>–õ–æ–≤: +0</li>
                  <li>–¢–µ–ª: +0</li>
                  <li>–ò–Ω—Ç: +0</li>
                  <li>–ú–¥—Ä: +0</li>
                  <li>–•–∞—Ä: +0</li>
                </ul>
              </div>
              <div>
                <h4>–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏</h4>
                <ul id="summary-skills">
                  <li>–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ: +0</li>
                  <li>–ê—Ç–ª–µ—Ç–∏–∫–∞: +0</li>
                  <li>... (–≤—ã–±–µ—Ä–∏—Ç–µ –≤ —Ñ–æ—Ä–º–µ)</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <p>–õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è D&D 5e</p>
    </footer>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // --- –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã ---
      const nameInput = document.getElementById("char-name");
      const raceSelect = document.getElementById("char-race");
      const classSelect = document.getElementById("char-class");
      const levelInput = document.getElementById("char-level");
      const bgInput = document.getElementById("char-background");
      const alignSelect = document.getElementById("char-alignment");
      const expInput = document.getElementById("char-exp");

      const statsInputs = {
        str: document.getElementById("str"),
        dex: document.getElementById("dex"),
        con: document.getElementById("con"),
        int: document.getElementById("int"),
        wis: document.getElementById("wis"),
        cha: document.getElementById("cha")
      };

      const hitDieInput = document.getElementById("hit-die");
      const currentHpInput = document.getElementById("current-hp");
      const maxHpInput = document.getElementById("max-hp");
      const baseSpeedInput = document.getElementById("base-speed");

      const skillCheckboxes = {};
      document.querySelectorAll('.skills-grid input[type="checkbox"]').forEach(cb => {
        skillCheckboxes[cb.id.replace('skill-', '')] = cb;
      });

      const saveBtn = document.getElementById("save-char");
      const exportBtn = document.getElementById("export-char");
      const resetBtn = document.getElementById("reset-char");
      const printBtn = document.getElementById("print-char");

      const avatarUpload = document.getElementById("avatar-upload");
      const summaryAvatar = document.getElementById("summary-avatar");

      // --- –≠–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ ---
      const preview = {
        name: document.getElementById("summary-name"),
        race: document.getElementById("summary-race"),
        class: document.getElementById("summary-class"),
        level: document.getElementById("summary-level"),
        bg: document.getElementById("summary-bg"),
        align: document.getElementById("summary-align"),
        // –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
        strVal: document.getElementById("summary-str-val"),
        dexVal: document.getElementById("summary-dex-val"),
        conVal: document.getElementById("summary-con-val"),
        intVal: document.getElementById("summary-int-val"),
        wisVal: document.getElementById("summary-wis-val"),
        chaVal: document.getElementById("summary-cha-val"),
        strMod: document.getElementById("summary-str-mod"),
        dexMod: document.getElementById("summary-dex-mod"),
        conMod: document.getElementById("summary-con-mod"),
        intMod: document.getElementById("summary-int-mod"),
        wisMod: document.getElementById("summary-wis-mod"),
        chaMod: document.getElementById("summary-cha-mod"),
        passDex: document.getElementById("summary-pass-dex"),
        passWis: document.getElementById("summary-pass-wis"),
        // –ë–æ–µ–≤—ã–µ
        ac: document.getElementById("summary-ac"),
        speed: document.getElementById("summary-speed"),
        init: document.getElementById("summary-init"),
        hp: document.getElementById("summary-hp"),
        maxHp: document.getElementById("summary-max-hp"),
        hd: document.getElementById("summary-hd"),
        // –°–ø–∞—Å–±—Ä–æ—Å–∫–∏ –∏ –Ω–∞–≤—ã–∫–∏
        savesList: document.getElementById("summary-saves"),
        skillsList: document.getElementById("summary-skills")
      };

      // --- –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è ---
      const calculatedAc = document.getElementById("calculated-ac");
      const calculatedSpeed = document.getElementById("calculated-speed");
      const calculatedInit = document.getElementById("calculated-init");

      // --- –°–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π ---
      const savedCharsList = document.getElementById("saved-characters-list");

      // --- –§—É–Ω–∫—Ü–∏–∏ ---
      const raceBonuses = {
  "human": { str: 1, dex: 1, con: 1, int: 1, wis: 1, cha: 1 },
  "elf": { dex: 2 },
  "high-elf": { dex: 2, int: 1 },
  "wood-elf": { dex: 2, wis: 1 },
  "dark-elf": { dex: 2, cha: 1 },
  "dwarf": { con: 2 },
  "hill-dwarf": { con: 2, wis: 1 },
  "mountain-dwarf": { con: 2, str: 2 },
  "halfling": { dex: 2 },
  "lightfoot-halfling": { dex: 2, cha: 1 },
  "stout-halfling": { dex: 2, con: 1 },
  "gnome": { int: 2 },
  "forest-gnome": { int: 2, dex: 1 },
  "rock-gnome": { int: 2, con: 1 },
  "half-orc": { str: 2, con: 1 },
  "half-elf": { cha: 2, "choose-2-stats": 1 },
  "tiefling": { cha: 2, int: 1 },
  "aarakocra": { dex: 2, wis: 1 },
  "aasimar": { cha: 2 },
  "protector-aasimar": { cha: 2, wis: 1 },
  "scourge-aasimar": { cha: 2, con: 1 },
  "fallen-aasimar": { cha: 2, str: 1 },
  "autognome": { con: 1, int: 1, "choose-1-stat": 1 },
  "bugbear": { str: 2, dex: 1 },
  "giff": { str: 2, con: 1 },
  "gith": { "choose-2-stats": 1 },
  "githyanki": { str: 2, int: 1 },
  "githzerai": { wis: 2, con: 1 },
  "simic-hybrid": { con: 2, "choose-1-stat": 1 },
  "verdan": { cha: 2, con: 1 },
  "vedalken": { int: 2, wis: 1 }
  // –î–æ–±–∞–≤—å –±–æ–ª—å—à–µ —Ä–∞—Å –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    };
      const classHitDice = {
  "–≤–æ–∏–Ω": "1–∫10",
  "–º–∞–≥": "1–∫6",
  "–∂—Ä–µ—Ü": "1–∫8",
  "—Ä–∞–∑–±–æ–π–Ω–∏–∫": "1–∫8",
  "–ø–∞–ª–∞–¥–∏–Ω": "1–∫10",
  "—Å–ª–µ–¥–æ–ø—ã—Ç": "1–∫10",
  "–≤–∞—Ä–≤–∞—Ä": "1–∫12",
  "–¥—Ä—É–∏–¥": "1–∫8",
  "–±–∞—Ä–¥": "1–∫8",
  "—á–∞—Ä–æ–¥–µ–π": "1–∫6",
  "–∫–æ–ª–¥—É–Ω": "1–∫8",
  "–º–æ–Ω–∞—Ö": "1–∫8"
};

function applyClassBonuses() {
  const selectedClass = classSelect.value;
  const hd = classHitDice[selectedClass];
  if (hd) {
    hitDieInput.value = hd;
  }
}

classSelect.addEventListener("change", () => {
  applyClassBonuses();
  updateCharacterInfo();
  updateCalculations();
});
function applyRaceBonuses() {
  const selectedRace = raceSelect.value;
  const bonuses = raceBonuses[selectedRace];

  if (bonuses) {
    for (let stat in bonuses) {
      if (["str", "dex", "con", "int", "wis", "cha"].includes(stat)) {
        const input = statsInputs[stat];
        if (input) {
          let val = parseInt(input.value) || 10;
          val += bonuses[stat];
          input.value = val;
        }
      }
    }
  }
}

// –í—ã–∑—ã–≤–∞–π applyRaceBonuses() –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–∞—Å—ã
raceSelect.addEventListener("change", () => {
  applyRaceBonuses();
  updateCharacterInfo();
  updateCalculations();
});
      // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Å—á—ë—Ç–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
      function getMod(value) {
        return Math.floor((value - 10) / 2);
      }

      function formatMod(mod) {
        return mod >= 0 ? `+${mod}` : `${mod}`;
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
      function updateCharacterInfo() {
        preview.name.textContent = nameInput.value || "–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞";
        preview.race.textContent = raceSelect.options[raceSelect.selectedIndex].text;
        preview.class.textContent = classSelect.value;
        preview.level.textContent = levelInput.value;
        preview.bg.textContent = bgInput.value || "-";
        preview.align.textContent = alignSelect.value;
        preview.hp.textContent = currentHpInput.value || "0";
        preview.maxHp.textContent = maxHpInput.value || "0";
        preview.hd.textContent = hitDieInput.value || "-";
        preview.speed.textContent = baseSpeedInput.value || "30";
        preview.init.textContent = formatMod(getMod(parseInt(statsInputs.dex.value) || 10));

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
        for (let key in statsInputs) {
          const value = parseInt(statsInputs[key].value) || 10;
          const mod = getMod(value);
          preview[`${key}Val`].textContent = value;
          preview[`${key}Mod`].textContent = formatMod(mod);
        }

        // –ö–î (–±–µ–∑ –¥–æ—Å–ø–µ—Ö–∞)
        const dexMod = getMod(parseInt(statsInputs.dex.value) || 10);
        const ac = 10 + dexMod;
        calculatedAc.textContent = ac;
        preview.ac.textContent = ac;

        // –°–∫–æ—Ä–æ—Å—Ç—å
        const speed = parseInt(baseSpeedInput.value) || 30;
        calculatedSpeed.textContent = speed;
        preview.speed.textContent = speed;

        // –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞
        const init = dexMod;
        calculatedInit.textContent = formatMod(init);
        preview.init.textContent = formatMod(init);

        // –°–ø–∞—Å–±—Ä–æ—Å–∫–∏
        const strMod = getMod(parseInt(statsInputs.str.value) || 10);
        const dexMod2 = getMod(parseInt(statsInputs.dex.value) || 10);
        const conMod = getMod(parseInt(statsInputs.con.value) || 10);
        const intMod = getMod(parseInt(statsInputs.int.value) || 10);
        const wisMod = getMod(parseInt(statsInputs.wis.value) || 10);
        const chaMod = getMod(parseInt(statsInputs.cha.value) || 10);

        const savesHtml = `
          <li>–°–∏–ª–∞: ${formatMod(strMod)}</li>
          <li>–õ–æ–≤–∫–æ—Å—Ç—å: ${formatMod(dexMod2)}</li>
          <li>–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ: ${formatMod(conMod)}</li>
          <li>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: ${formatMod(intMod)}</li>
          <li>–ú—É–¥—Ä–æ—Å—Ç—å: ${formatMod(wisMod)}</li>
          <li>–•–∞—Ä–∏–∑–º–∞: ${formatMod(chaMod)}</li>
        `;
        preview.savesList.innerHTML = savesHtml;

        // –ù–∞–≤—ã–∫–∏
        const proficiencyBonus = Math.ceil(1 + (parseInt(levelInput.value) || 1) / 4);
        const skillsData = [
          { id: 'acrobatics', stat: 'dex', name: '–ê–∫—Ä–æ–±–∞—Ç–∏–∫–∞' },
          { id: 'animal-handling', stat: 'wis', name: '–£—Ö–æ–¥ –∑–∞ –∂–∏–≤–æ—Ç–Ω—ã–º–∏' },
          { id: 'arcana', stat: 'int', name: '–ú–∞–≥–∏—è' },
          { id: 'athletics', stat: 'str', name: '–ê—Ç–ª–µ—Ç–∏–∫–∞' },
          { id: 'deception', stat: 'cha', name: '–û–±–º–∞–Ω' },
          { id: 'history', stat: 'int', name: '–ò—Å—Ç–æ—Ä–∏—è' },
          { id: 'insight', stat: 'wis', name: '–ü—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å' },
          { id: 'intimidation', stat: 'cha', name: '–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ' },
          { id: 'investigation', stat: 'int', name: '–†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ' },
          { id: 'medicine', stat: 'wis', name: '–ú–µ–¥–∏—Ü–∏–Ω–∞' },
          { id: 'nature', stat: 'int', name: '–ü—Ä–∏—Ä–æ–¥–∞' },
          { id: 'perception', stat: 'wis', name: '–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ' },
          { id: 'performance', stat: 'cha', name: '–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ' },
          { id: 'persuasion', stat: 'cha', name: '–£–±–µ–∂–¥–µ–Ω–∏–µ' },
          { id: 'religion', stat: 'int', name: '–†–µ–ª–∏–≥–∏—è' },
          { id: 'sleight-of-hand', stat: 'dex', name: '–õ–æ–≤–∫–æ—Å—Ç—å —Ä—É–∫' },
          { id: 'stealth', stat: 'dex', name: '–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å' },
          { id: 'survival', stat: 'wis', name: '–í—ã–∂–∏–≤–∞–Ω–∏–µ' }
        ];

        let skillsHtml = '';
        skillsData.forEach(skill => {
          const isProficient = skillCheckboxes[skill.id] && skillCheckboxes[skill.id].checked;
          const skillMod = getMod(parseInt(statsInputs[skill.stat].value) || 10) + (isProficient ? proficiencyBonus : 0);
          skillsHtml += `<li>${skill.name}: ${formatMod(skillMod)}</li>`;
        });
        preview.skillsList.innerHTML = skillsHtml;
      }

      // --- –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ ---
      avatarUpload.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (evt) => {
      const base64 = evt.target.result;
      summaryAvatar.src = base64;
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
      const saved = JSON.parse(localStorage.getItem("dnd-character")) || {};
      saved.avatar = base64;
      localStorage.setItem("dnd-character", JSON.stringify(saved));
    };
    reader.readAsDataURL(file);
  }
});
      // --- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ---
      saveBtn.addEventListener("click", () => {
  const data = {
    name: nameInput.value,
    race: raceSelect.value,
    class: classSelect.value,
    level: levelInput.value,
    background: bgInput.value,
    alignment: alignSelect.value,
    exp: expInput.value,
    stats: {},
    combat: {
      hitDie: hitDieInput.value,
      currentHp: currentHpInput.value,
      maxHp: maxHpInput.value,
      baseSpeed: baseSpeedInput.value
    },
    skills: {},
    avatar: summaryAvatar.src // <-- –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–≤–∞—Ç–∞—Ä
  };
  for (let key in statsInputs) {
    data.stats[key] = statsInputs[key].value;
  }
  for (let key in skillCheckboxes) {
    data.skills[key] = skillCheckboxes[key].checked;
  }
  localStorage.setItem("dnd-character", JSON.stringify(data));
  alert("‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!");
});
          avatar: summaryAvatar.src // <-- –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–≤–∞—Ç–∞—Ä
        };
        for (let key in statsInputs) {
          data.stats[key] = statsInputs[key].value;
        }
        for (let key in skillCheckboxes) {
          data.skills[key] = skillCheckboxes[key].checked;
        }
        localStorage.setItem("dnd-character", JSON.stringify(data));
        alert("‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!");

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
        updateSavedCharactersList();
      });

      // --- –≠–∫—Å–ø–æ—Ä—Ç ---
      exportBtn.addEventListener("click", () => {
        // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, —ç–∫—Å–ø–æ—Ä—Ç–∏–º —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        const data = {
          name: nameInput.value || "–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞",
          race: raceSelect.options[raceSelect.selectedIndex].text,
          class: classSelect.value,
          level: levelInput.value,
          stats: {}
        };
        for (let key in statsInputs) {
          const value = parseInt(statsInputs[key].value);
          data.stats[key] = `${value} (${formatMod(getMod(value))})`;
        }

        let text = `=== –õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ ===\n`;
        text += `–ò–º—è: ${data.name}\n`;
        text += `–†–∞—Å–∞: ${data.race}\n`;
        text += `–ö–ª–∞—Å—Å: ${data.class}\n`;
        text += `–£—Ä–æ–≤–µ–Ω—å: ${data.level}\n\n`;
        text += `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:\n`;
        for (let key in data.stats) {
          const name = {
            str: "–°–∏–ª–∞", dex: "–õ–æ–≤–∫–æ—Å—Ç—å", con: "–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ",
            int: "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç", wis: "–ú—É–¥—Ä–æ—Å—Ç—å", cha: "–•–∞—Ä–∏–∑–º–∞"
          }[key];
          text += `- ${name}: ${data.stats[key]}\n`;
        }

        const blob = new Blob([text], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `${data.name.replace(/\s+/g, '_') || "–ø–µ—Ä—Å–æ–Ω–∞–∂"}.txt`;
        a.click();
        URL.revokeObjectURL(url);
      });

      // --- –°–±—Ä–æ—Å ---
      resetBtn.addEventListener("click", () => {
        if (confirm("üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É?")) {
          nameInput.value = "";
          raceSelect.value = "human";
          classSelect.value = "–≤–æ–∏–Ω";
          levelInput.value = "1";
          bgInput.value = "";
          alignSelect.value = "–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π";
          expInput.value = "0";
          for (let key in statsInputs) {
            statsInputs[key].value = "10";
          }
          hitDieInput.value = "";
          currentHpInput.value = "";
          maxHpInput.value = "";
          baseSpeedInput.value = "30";
          for (let key in skillCheckboxes) {
            skillCheckboxes[key].checked = false;
          }
          summaryAvatar.src = "https://via.placeholder.com/100x100/3a2a1a/d4af37?text=üë§";
          updateCharacterInfo();
        }
      });
    printBtn.addEventListener("click", () => {
      window.open("print-character.html", "_blank");
    });
      // --- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ ---
      const saved = localStorage.getItem("dnd-character");
      if (saved) {
        try {
          const data = JSON.parse(saved);
          nameInput.value = data.name || "";
          raceSelect.value = data.race || "human";
          classSelect.value = data.class || "–≤–æ–∏–Ω";
          levelInput.value = data.level || "1";
          bgInput.value = data.background || "";
          alignSelect.value = data.alignment || "–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π";
          expInput.value = data.exp || "0";
          for (let key in data.stats) {
            if (statsInputs[key]) {
              statsInputs[key].value = data.stats[key];
              if (data.avatar) {
                summaryAvatar.src = data.avatar;
              }
            }
          }
          if (data.combat) {
            hitDieInput.value = data.combat.hitDie || "";
            currentHpInput.value = data.combat.currentHp || "";
            maxHpInput.value = data.combat.maxHp || "";
            baseSpeedInput.value = data.combat.baseSpeed || "30";
          }
          if (data.skills) {
            for (let key in data.skills) {
              if (skillCheckboxes[key] !== undefined) {
                skillCheckboxes[key].checked = data.skills[key];
              }
            }
          }
          if (data.avatar) {
            summaryAvatar.src = data.avatar;
          }
          updateCharacterInfo();
        }
