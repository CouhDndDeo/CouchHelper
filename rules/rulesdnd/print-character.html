<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üßæ –°–≤–æ–¥–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ ‚Äî –ü–µ—á–∞—Ç—å</title>
  <style>
    /* === –°–¢–ò–õ–ò –î–õ–Ø –ü–ï–ß–ê–¢–ò === */
    @media print {
      body {
        margin: 0;
        padding: 0;
        font-family: 'Georgia', serif;
        background: #fff;
        color: #000;
      }

      .container {
        max-width: 100%;
        margin: 0;
        padding: 10px;
        border: none;
        box-shadow: none;
      }

      header, nav, footer, .no-print {
        display: none;
      }

      .char-summary {
        border: 1px solid #000;
        padding: 15px;
        border-radius: 0;
        box-shadow: none;
      }

      .summary-details > div {
        border-right: 1px solid #000;
      }

      .summary-stats {
        page-break-inside: avoid;
      }

      .summary-stat {
        border: 1px solid #000;
      }

      .summary-combat {
        border: 1px solid #000;
        background: #eee;
      }

      .summary-quick-info h4 {
        border-bottom: 1px solid #000;
      }

      .summary-quick-info ul {
        columns: 2;
        column-gap: 20px;
      }

      .highlight {
        font-weight: bold;
        color: #000;
      }

      .proficient {
        font-weight: bold;
      }
    }

    /* === –°–¢–ò–õ–ò –î–õ–Ø –≠–ö–†–ê–ù–ê === */
    body {
      font-family: 'Georgia', serif;
      background: #1a110a url('https://images.unsplash.com/photo-1601924650058-5d5e72c808e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') no-repeat center;
      background-size: cover;
      color: #e0ccb6;
      line-height: 1.7;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 960px;
      margin: 20px auto;
      padding: 20px;
      background: rgba(30, 20, 10, 0.85);
      border: 2px solid #5a3b26;
      border-radius: 12px;
      box-shadow: 
        0 0 20px rgba(0, 0, 0, 0.6),
        0 0 30px rgba(139, 111, 71, 0.3) inset;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
      border-bottom: 1px dashed #8b6f47;
      padding-bottom: 10px;
    }

    header h1 {
      font-size: 2.5em;
      color: #d4af37;
      text-shadow: 0 0 5px #000;
    }

    .char-summary {
      background: linear-gradient(145deg, #5a3b26, #4a2e1a);
      border: 2px solid #8b6f47;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 
        0 6px 0 #3a2410,
        0 6px 15px rgba(0, 0, 0, 0.5);
      text-align: center;
      position: relative;
    }

    .avatar-container {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 2px solid #d4af37;
      overflow: hidden;
      margin: 0 auto 15px;
      background-color: #3a2410;
    }

    .avatar-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .summary-name {
      font-size: 1.8em;
      color: #f0d98f;
      margin: 10px 0;
    }

    .summary-details {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      font-size: 0.95em;
      margin-bottom: 20px;
    }

    .summary-details > div { 
      border-right: 1px solid #8b6f47; 
      padding: 0 10px; 
    }
    .summary-details > div:last-child { 
      border-right: none; 
    }

    .summary-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 20px 0;
    }

    .summary-stat {
      background: rgba(0, 0, 0, 0.2);
      padding: 10px 5px;
      border-radius: 6px;
      border: 1px solid #5a3b26;
    }

    .summary-stat-name { 
      font-size: 0.8em; 
      color: #b8a594; 
    }
    .summary-stat-value { 
      font-size: 1.4em; 
      font-weight: bold; 
      color: #f0d98f; 
    }
    .summary-stat-mod { 
      font-size: 0.9em; 
      color: #d4af37; 
    }

    .summary-combat {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
      padding: 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 6px;
      font-size: 0.95em;
    }

    .summary-quick-info {
      text-align: left;
      margin-top: 20px;
      font-size: 0.9em;
    }

    .summary-quick-info h4 {
      color: #d4af37;
      border-bottom: 1px solid #8b6f47;
      padding-bottom: 3px;
      margin: 10px 0 5px;
    }

    .summary-quick-info ul {
      list-style-type: none;
      padding-left: 10px;
      margin: 0;
      columns: 2;
      column-gap: 20px;
    }

    .summary-quick-info li { 
      margin-bottom: 3px; 
    }

    .highlight {
      font-weight: bold;
      color: #d4af37;
    }

    .proficient {
      font-weight: bold;
    }

    .btn-print {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background: #d4af37;
      color: #1a110a;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.3s;
    }

    .btn-print:hover {
      background: #e6c86e;
      transform: scale(1.05);
    }

    footer {
      text-align: center;
      margin-top: 40px;
      color: #a89b8c;
      font-style: italic;
      padding-top: 20px;
      border-top: 1px dashed #5a3b26;
    }

    @media (max-width: 768px) {
      .summary-stats {
        grid-template-columns: repeat(2, 1fr);
      }
      .summary-details {
        flex-direction: column;
        align-items: center;
      }
      .summary-details > div {
        border-right: none;
        padding: 5px 0;
      }
      .summary-quick-info ul {
        columns: 1;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üßæ –°–≤–æ–¥–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h1>
    </header>

    <nav class="no-print">
      <a href="character-sheet.html" class="btn-back">
        <span class="arrow">‚Üê</span>
        <span class="text">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä—É</span>
      </a>
    </nav>

    <main>
      <div class="char-summary">
        <div class="avatar-container">
          <img id="summary-avatar" src="image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%233a2410'/%3E%3C/svg%3E" alt="–ê–≤–∞—Ç–∞—Ä">
        </div>
        <div class="summary-name" id="summary-name">–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</div>
        <div class="summary-details">
          <div><strong>–†–∞—Å–∞:</strong> <span id="summary-race">-</span></div>
          <div><strong>–ö–ª–∞—Å—Å:</strong> <span id="summary-class">-</span></div>
          <div><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> <span id="summary-level">1</span></div>
          <div><strong>–ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è:</strong> <span id="summary-bg">-</span></div>
          <div><strong>–ú–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏–µ:</strong> <span id="summary-align">-</span></div>
        </div>

        <div class="summary-combat">
          <div><strong>–ö–î:</strong> <span id="summary-ac">10</span></div>
          <div><strong>–•–ü:</strong> <span id="summary-hp">0</span>/<span id="summary-max-hp">0</span></div>
          <div><strong>–°–∫–æ—Ä–æ—Å—Ç—å:</strong> <span id="summary-speed">30</span> —Ñ—Ç.</div>
          <div><strong>–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞:</strong> <span id="summary-init">+0</span></div>
        </div>

        <div class="summary-stats">
          <div class="summary-stat">
            <div class="summary-stat-name">–°–ò–õ</div>
            <div class="summary-stat-value" id="summary-str-val">10</div>
            <div class="summary-stat-mod" id="summary-str-mod">+0</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-name">–õ–û–í</div>
            <div class="summary-stat-value" id="summary-dex-val">10</div>
            <div class="summary-stat-mod" id="summary-dex-mod">+0</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-name">–¢–ï–õ</div>
            <div class="summary-stat-value" id="summary-con-val">10</div>
            <div class="summary-stat-mod" id="summary-con-mod">+0</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-name">–ò–ù–¢</div>
            <div class="summary-stat-value" id="summary-int-val">10</div>
            <div class="summary-stat-mod" id="summary-int-mod">+0</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-name">–ú–î–†</div>
            <div class="summary-stat-value" id="summary-wis-val">10</div>
            <div class="summary-stat-mod" id="summary-wis-mod">+0</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-name">–•–ê–†</div>
            <div class="summary-stat-value" id="summary-cha-val">10</div>
            <div class="summary-stat-mod" id="summary-cha-mod">+0</div>
          </div>
        </div>

        <div class="summary-quick-info">
          <h4>–ö–ª—é—á–µ–≤—ã–µ —Å–ø–∞—Å–±—Ä–æ—Å–∫–∏</h4>
          <ul id="summary-saves">
            <li>–°–∏–ª: +0</li>
            <li>–õ–æ–≤: +0</li>
            <li>–¢–µ–ª: +0</li>
            <li>–ò–Ω—Ç: +0</li>
            <li>–ú–¥—Ä: +0</li>
            <li>–•–∞—Ä: +0</li>
          </ul>
          <h4>–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏</h4>
          <ul id="summary-skills">
            <li>–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ: +0</li>
            <li>–ê—Ç–ª–µ—Ç–∏–∫–∞: +0</li>
            <li>... (–≤—ã–±–µ—Ä–∏—Ç–µ –≤ —Ñ–æ—Ä–º–µ)</li>
          </ul>
        </div>
      </div>

      <button class="btn-print no-print" onclick="window.print()">
        üñ®Ô∏è –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å —Å–≤–æ–¥–∫—É
      </button>
    </main>

    <footer class="no-print">
      <p>–°–≤–æ–¥–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è D&D 5e</p>
    </footer>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // --- –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage ---
      const saved = localStorage.getItem("dnd-character");
      if (!saved) {
        alert("‚ùå –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.");
        window.location.href = "character-sheet.html";
        return;
      }

      try {
        const data = JSON.parse(saved);

        // --- –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã ---
        document.getElementById("summary-name").textContent = data.name || "–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞";
        document.getElementById("summary-race").textContent = data.race || "-";
        document.getElementById("summary-class").textContent = data.class || "-";
        document.getElementById("summary-level").textContent = data.level || "1";
        document.getElementById("summary-bg").textContent = data.background || "-";
        document.getElementById("summary-align").textContent = data.alignment || "–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π";
        document.getElementById("summary-hp").textContent = data.combat?.currentHp || "0";
        document.getElementById("summary-max-hp").textContent = data.combat?.maxHp || "0";
        document.getElementById("summary-speed").textContent = data.combat?.baseSpeed || "30";
        document.getElementById("summary-ac").textContent = data.combat?.ac || "10";
        document.getElementById("summary-init").textContent = data.combat?.init || "+0";

        // --- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ ---
        const stats = data.stats || {};
        const statKeys = ["str", "dex", "con", "int", "wis", "cha"];
        statKeys.forEach(key => {
          const val = stats[key] || "10";
          const mod = Math.floor((val - 10) / 2);
          document.getElementById(`summary-${key}-val`).textContent = val;
          document.getElementById(`summary-${key}-mod`).textContent = mod >= 0 ? `+${mod}` : `${mod}`;
        });

        // --- –°–ø–∞—Å–±—Ä–æ—Å–∫–∏ –∏ –Ω–∞–≤—ã–∫–∏ (–∑–∞–≥–ª—É—à–∫–∞, —Ç–∞–∫ –∫–∞–∫ –≤ localStorage –∏—Ö –Ω–µ—Ç) ---
        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Ö –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å
        document.getElementById("summary-saves").innerHTML = `
          <li class="proficient">–°–∏–ª: +2</li>
          <li>–õ–æ–≤: +0</li>
          <li class="proficient">–¢–µ–ª: +1</li>
          <li>–ò–Ω—Ç: +0</li>
          <li class="proficient">–ú–¥—Ä: +3</li>
          <li>–•–∞—Ä: +0</li>
        `;
        document.getElementById("summary-skills").innerHTML = `
          <li class="proficient">–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ: +3</li>
          <li>–ê—Ç–ª–µ—Ç–∏–∫–∞: +2</li>
          <li class="proficient">–ü—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: +3</li>
          <li>–ú–µ–¥–∏—Ü–∏–Ω–∞: +3</li>
          <li>–í—ã–∂–∏–≤–∞–Ω–∏–µ: +3</li>
          <li>... (–≤—ã–±–µ—Ä–∏—Ç–µ –≤ —Ñ–æ—Ä–º–µ)</li>
        `;

        // --- –ê–≤–∞—Ç–∞—Ä ---
        if (data.avatar) {
          document.getElementById("summary-avatar").src = data.avatar;
        }

      } catch (e) {
        console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:", e);
        alert("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.");
        window.location.href = "character-sheet.html";
      }
    });
  </script>
</body>
</html>
